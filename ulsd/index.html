


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Unified line segment detection and line based 2D-3D registration/localization - AirLab</title>
    
    <link rel="stylesheet" href="/assets/css/app.css">

    <link rel="shortcut icon" type="image/ico" href="/img/favicon/favicon.ico" />

    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#cc002b">
    <meta name="msapplication-TileColor" content="#b91d47">
    <meta name="theme-color" content="#ffffff">

    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  
  
    <script>
      $(document).ready(function () {
          $('.content a').attr({'target':'_blank', 'rel':'noopener noreferrer'});
        });
    </script>
  

    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Unified line segment detection and line based 2D-3D registration/localization | AirLab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Unified line segment detection and line based 2D-3D registration/localization" />
<meta name="author" content="Huai Yu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Unified line segment detection and line based 2D-3D localization" />
<meta property="og:description" content="Unified line segment detection and line based 2D-3D localization" />
<link rel="canonical" href="https://theairlab.org/ulsd/" />
<meta property="og:url" content="https://theairlab.org/ulsd/" />
<meta property="og:site_name" content="AirLab" />
<meta property="og:image" content="https://theairlab.org/img/posts/2021-05-25-ulsd/IROS2020.gif" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-25T10:50:07+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://theairlab.org/img/posts/2021-05-25-ulsd/IROS2020.gif" />
<meta property="twitter:title" content="Unified line segment detection and line based 2D-3D registration/localization" />
<script type="application/ld+json">
{"image":"https://theairlab.org/img/posts/2021-05-25-ulsd/IROS2020.gif","author":{"@type":"Person","name":"Huai Yu"},"headline":"Unified line segment detection and line based 2D-3D registration/localization","dateModified":"2021-05-25T10:50:07+00:00","datePublished":"2021-05-25T10:50:07+00:00","description":"Unified line segment detection and line based 2D-3D localization","url":"https://theairlab.org/ulsd/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://theairlab.org/ulsd/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ERWFHDG4GX"></script>
<script>
  window['ga-disable-G-ERWFHDG4GX'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ERWFHDG4GX');
</script><!-- head scripts --><!-- Added by Chen -->
    <script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5ee902d30e78e50012567eb4&product=inline-follow-buttons&cms=sop' async='async'></script>

    <!-- for mathjax support -->
    

</head>

<body>
    
        
<nav class="navbar is-primary" >
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item navbar-logo">
                AirLab
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu">
            <div class="navbar-start">
                <a href="/" class="navbar-item ">Home</a>
                
                
                    
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="/current-members/" class="navbar-link ">Team</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/current-members/" class="navbar-item ">Current Members</a>
                            
                            <a href="/alumni/" class="navbar-item ">Alumni</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <a href="/research/" class="navbar-item ">Research</a>
                    
                
                    
                    <a href="/publications/" class="navbar-item ">Publications</a>
                    
                
                    
                    <a href="/news/" class="navbar-item ">News</a>
                    
                
                    
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="" class="navbar-link ">Seminars</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/tartanplanningseries/" class="navbar-item ">Tartan Planning Series</a>
                            
                            <a href="/tartanslamseries2/" class="navbar-item ">Tartan SLAM Series Fall Edition</a>
                            
                            <a href="/tartanslamseries/" class="navbar-item ">Tartan SLAM Series</a>
                            
                            <a href="/summer2020/" class="navbar-item ">Summer School 2020</a>
                            
                            <a href="/icra2024_offroad_workshop/" class="navbar-item ">ICRA 2024 Off-road Workshop</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <a href="/datasets/" class="navbar-item ">Datasets</a>
                    
                
                    
                    <a href="/openings/" class="navbar-item ">Openings</a>
                    
                
                    
                    <a href="/contact/" class="navbar-item ">Contact</a>
                    
                
                
            </div>
        </div>
    </div>
</nav>

    
     
        <section class="hero  is-medium  is-bold is-primary" >
    <div class="hero-body">
        <div class="container">
            
                <p class="title is-2">Unified line segment detection and line based 2D-3D registration/localization</p>
                <p class="subtitle is-3"></p>
                <p class="subtitle is-3">
            
            
            
        </p>
        </div>
    </div>
</section>

<style>
    .button.is-info {
     background-color:#cc002b;
     border-color:transparent;
     color:#fff
    }
    .button.is-info.is-hovered {
     background-color:#cc002b;
     border-color:transparent;
     color:#fff
    }
</style>
 
     
    


    <section class="section">
        <div class="container">
            <div class="columns">
                

                
                <div class="column is-8">
                      
	


<!-- Figure out the relative link to the author -->





	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	
		
			

<div class="content">

    <p><div style="font-size: 13px">Published: 
		<time datetime="2021-05-25T10:50:07+00:00">May 25, 2021</time> by 
		<div style="font-weight: bold; color: #3399ff; display: inline">
		
			<a href="/team/huaiy">Huai Yu</a>
		
		</div>
	</div></p>

    <h1>Unified line segment detection and line based 2D-3D registration/localization</h1>

    <hr />

<p>The 2D to 3D registration problem is to match a query image with a 3D model to establish the geometric correspondences between the two modalities and estimate camera pose. Since camera and LiDAR are widely used instruments for scene interpretation and intelligent transportation, the 2D-3D registration is essential for many applications, e.g. point cloud colorization, camera to LiDAR calibration and camera localization. Low-cost LiDAR sensors usually capture geometric data without textured information. However, without textured information, it is difficult to recognize semantic information even for artificial visual interpretation. Based on the estimated transformation parameters, image textures can be used to colorize untextured point clouds, which is beneficial for further interpretation. With the developments of low-cost LiDAR sensors and the advancements in LiDAR-based {Simultaneous Localization and Mapping (SLAM)} algorithms, point cloud 3D models can be easily obtained. Thus 2D-3D registration can be used to localize a small lightweight camera inside pre-built 3D maps, which is attractive and complementary to existing visual SLAM technology.</p>

<figure>
 <img src="/img/posts/2021-05-25-ulsd/euroc.png" style="width:49%" />
  <img src="/img/posts/2021-05-25-ulsd/2d3dloc.png" style="width:49%" />
<!-- <img src="/img/posts/2021-05-25-ulsd/smith.png" style="width:31%" /> -->
 <figcaption>
The proposed monocular camera localization system in prior LiDAR maps. The right LiDAR map is colored by height. The red and green trajectories are the results of VINS-Mono and ours, respectively. Top-left image shows the 3D line projections (green) using the estimated pose of VINS-Mono (with occlusions) and the extracted 2D lines (red), while the bottom-left image shows the 2D-3D correspondences using the pose estimation of the proposed method.
 </figcaption>
</figure>

<p>In this work, we first developed a unified line segment detection method with the Bezier curve line representation and end-end trainable netowrk, which guarantees the robustness of geometric feature extracrtion back-end. Then for the global 2D-3D localization in the manhattan world, we proposed to use geometric constraints between vanishing points and 3D parallel lines to decouple the 6-DoF pose estimation. Finally, we developed a systematic 2D-3D pose tracking framework by iteratively optimize 2D-3D line correspondences and camera pose. 
<!-- The project is in collaboration with Environmental Engineering, Sustainability, and Science (EESS) led by Dr Constantine Samaras. --></p>

<p>Some of the current contributions are as follows:</p>

<!-- <figure>
 <img src="/img/posts/2020-02-14-filming/lapse_car_web.jpg" alt="Drone filming" />
 <figcaption>
 Drone autonomously filming a moving vehicle
 </figcaption>
</figure> -->

<h2 id="unified-line-feature-detection-across-pinhole-fisheye-and-spherical-cameras">Unified line feature detection across pinhole, fisheye and spherical cameras</h2>
<hr />

<figure>
 <img src="/img/posts/2021-05-25-ulsd/ulsd.png" style="width:100%" />
 <figcaption>
Framework of the unified line feature detection netowrk
 </figcaption>
</figure>
<p>Image line segment detection is a fundamental problem in computer vision and robotics. Although numerous state-of-the-art methods have shown great performance for straight line segment detection, the line segment detection for distorted images without undistortion is still a challenging problem. Besides, there is a lack of a unified line segment detection framework for both distorted and undistorted images. To address these two problems, we propose a novel learning-based Unified Line Segment Detection method (i.e., ULSD) for distorted and undistorted images in this paper. Specifically, we first propose a novel equipartition point-based Bezier curve representation to model arbitrary distorted line segments. Then the line segment detection is tackled by equipartition point regression with an end-to-end trainable neural network. Consequently, the proposed ULSD is independent of camera distortion parameters and does not need any undistortion preprocessing. In the experiments, the proposed method is firstly evaluated on the pinhole, fisheye, and spherical image datasets, respectively, as well as trained and tested on the mixed dataset with different distorted images. The experimental results on each distortion model show that the proposed ULSD is more competitive than the state-of-the-art methods for both accuracy and efficiency, especially for the results of the unified model trained on the mixed datasets, thus demonstrating the effectiveness and generality of the proposed ULSD to real-world scenarios.</p>
<div class="video-wrapper"><iframe src="http://www.youtube.com/embed/9h79zK2H8OI" frameborder="0" allowfullscreen=""></iframe></div>

<p><br /></p>

<h2 id="line-based-2d-3d-registration-and-camera-localization-in-structured-environments">Line-based 2D-3D registration and camera localization in Structured environments</h2>
<p>Accurate registration of 2D imagery with point clouds is a key technology for image-LiDAR point cloud fusion, camera to laser scanner calibration and camera localization. Despite continuous improvements, automatic registration of 2D images and 3D LiDAR maps without using additional textured information still faces great challenges. In this paper, we propose a new 2D-3D registration method to estimate 2D-3D line feature correspondences and the camera pose in untextured point clouds of structured environments. Specifically, we first use geometric constraints between vanishing points and 3D parallel lines to compute all feasible camera rotations. Then, we utilize a hypothesis testing strategy to estimate the 2D-3D line correspondences and the translation vector. By checking the consistency with computed correspondences, the best rotation matrix can be found. Finally, the camera pose is further refined using non-linear optimization with all the 2D-3D line correspondences. The experimental results demonstrate the effectiveness of the proposed method on the synthetic and real dataset (outdoors and indoors) with repeated structures and rapid depth changes.</p>

<div class="video-wrapper"><iframe src="http://www.youtube.com/embed/XpGvhL5QHtQ" frameborder="0" allowfullscreen=""></iframe></div>

<p><br /></p>

<h3 id="line-based-2d-3d-pose-tracking">Line based 2D-3D pose tracking</h3>

<p>Light-weight camera localization in existing maps is essential for vision-based navigation. Currently, visual and visual-inertial odometry (VO\&amp;VIO) techniques are well-developed for state estimation but with inevitable accumulated drifts and pose jumps upon loop closure. To overcome these problems, we propose an efficient monocular camera localization method in prior LiDAR maps using direct 2D-3D line correspondences. To handle the appearance differences and modality gaps between LiDAR point clouds and images, geometric 3D lines are extracted offline from LiDAR maps while robust 2D lines are extracted online from video sequences. With the pose prediction from VIO, we can efficiently obtain coarse 2D-3D line correspondences. Then the camera poses and 2D-3D correspondences are iteratively optimized by minimizing the projection error of correspondences and rejecting outliers. Experimental results on the EurocMav dataset and our collected dataset demonstrate that the proposed method can efficiently estimate camera poses without accumulated drifts or pose jumps in structured environments.</p>
<figure>
 <img src="/img/posts/2021-05-25-ulsd/2d-3d-pose-tracking.png" style="width:90%" />
 <figcaption>
Overview of the propose 2d-3d pose tracking framework
 </figcaption>
</figure>
<div class="video-wrapper"><iframe src="http://www.youtube.com/embed/H80Bnxm8IPE" frameborder="0" allowfullscreen=""></iframe></div>

<p>The 2D-3D pose tracking was tested on a desktop (Intel Core i7-4790K CPU and GTX 980Ti GPU) and a laptop (Intel Core i7-8750H CPU and GTX 1060 GPU). The GPU is only used for 2D line detection. VINS-Mono does not use map information and can be customized set for output frequency. We select the most stable one at 15 Hz. Then for the estimation of 2D-3D correspondences and the camera poses, it costs about 0.01 seconds on average for each keyframe. Since the 3D line extraction is offline before the system starts, 2D line detection can run at 25Hz on 640x480 images, our method can run at about 13~15 Hz for all the scenarios.</p>

<p><br /></p>

<h2 id="publications">Publications</h2>
<hr />

<ul>
  <li>Hao Li<em>, Huai Yu</em>, Wen Yang, Lei Yu, Sebastian Scherer, “<strong>ULSD: Unified Line Segment Detection across Pinhole, Fisheye, and Spherical Cameras</strong>”, ISPRS Journal of Photogrammetry and Remote Sensing 178, 2021:187-202.</li>
  <li>Huai Yu, Weikun Zhen, Wen Yang, and Sebastian Scherer, “<strong>Line-Based 2-D–3-D Registration and Camera Localization in Structured Environments</strong>”, IEEE Transactions on Instrumentation and Measurement 69, no. 11 (2020): 8962-8972.</li>
  <li>Huai Yu, Weikun Zhen, Wen Yang, Ji Zhang, and Sebastian Scherer, “<strong>Monocular Camera Localization in Prior LiDAR Maps with 2D-3D Line Correspondences</strong>”, International Conference on Intelligent Robots and Systems (IROS), 2020</li>
</ul>

<p><br /></p>
<h3 id="contact">Contact</h3>

<ul>
  <li>Huai Yu : (huaiy [at] andrew [dot] cmu [dot] edu)</li>
  <li>Sebastian Scherer: (basti [at] cmu [dot] edu)</li>
</ul>


</div>

<div class="tags">
    
</div>


  

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://theairlab.org/ulsd/';
      this.page.identifier = 'https://theairlab.org/ulsd/';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://theairlab.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



                </div>
                
                <div class="column is-4-desktop is-12-tablet">
                    <p class="title is-4">Latest Research</p>

<div class="columns is-multiline">
    
    <div class="column is-12">
        
<a href="https://seungchan-kim.github.io/multi-robot-multi-room" target="_blank">

<div class="card" style="height: 100%; display: flex; flex-direction: column; align-items: center;">
    
        <div style="height: 200px;">
            <img src="/img/posts/2023-12-06-multirobot-multiroom/mrmr_intro_fig.png" alt="Multi-Robot Multi-Room Exploration with Geometric Cue Extraction and Circular Decomposition" style="object-fit: contain; height: 100%;">
        </div>
    
    <div class="card-content" style="flex-grow: 3;">
        <div class="content">
            
            <div class="title is-5">Multi-Robot Multi-Room Exploration with Geometric Cue Extraction and Circular Decomposition</div>
            
            <p>This work proposes an autonomous multi-robot exploration pipeline that coordinates the behaviors ...</p>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Dec 6, 2023</p>
    </footer>
</div>
</a>

    </div>
    
    <div class="column is-12">
        
<a href="https://spla-tam.github.io/" target="_blank">

<div class="card" style="height: 100%; display: flex; flex-direction: column; align-items: center;">
    
        <div style="height: 200px;">
            <img src="/img/posts/2023-12-04-splatam/SplaTAM.png" alt="SplaTAM: Splat, Track & Map 3D Gaussians for Dense RGB-D SLAM" style="object-fit: contain; height: 100%;">
        </div>
    
    <div class="card-content" style="flex-grow: 3;">
        <div class="content">
            
            <div class="title is-5">SplaTAM: Splat, Track & Map 3D Gaussians for Dense RGB-D SLAM</div>
            
            <p>Precise camera tracking &amp; high-fidelity reconstruction of challenging real-world scenarios.</p>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Dec 4, 2023</p>
    </footer>
</div>
</a>

    </div>
    
    <div class="column is-12">
        
<a href="https://anyloc.github.io/FoundLoc/" target="_blank">

<div class="card" style="height: 100%; display: flex; flex-direction: column; align-items: center;">
    
        <div style="height: 200px;">
            <img src="/img/posts/2023-11-24-foundloc/FoundLoc.png" alt="FoundLoc: Vision-based Onboard Aerial Localization in the Wild" style="object-fit: contain; height: 100%;">
        </div>
    
    <div class="card-content" style="flex-grow: 3;">
        <div class="content">
            
            <div class="title is-5">FoundLoc: Vision-based Onboard Aerial Localization in the Wild</div>
            
            <p>GPS-denied localization with no initial assumption of position (kidnapped robot problem).</p>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Nov 24, 2023</p>
    </footer>
</div>
</a>

    </div>
    
</div>




                </div>
                
            </div>
        </div>
    </section>
     <style>
  #blocks {
      width:100%;
      height:60px;
      margin:0 auto;
      /* background-color: #ffe; */
  }
  #block1 {
      height:33.33%;
      width:30%;
      /* background: red; */
      float: left;
  }
  #block2 {
      height:33.33%;
      width:40%;
      /* background: yellow; */
      float: left;
  }
  #block3 {
      height:33.33%;
      width:30%;
      /* background: green; */
      float: right;
  }
</style>

<footer class="footer">
    <div class="container">
        <!-- 
        <div class="columns is-multiline">
            
            <div class="column has-text-centered">
                <div>
                    <a href="/" class="link">Home</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="/blog/" class="link">Blog</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="/products/" class="link">Products</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="/privacy-policy/" class="link">Privacy Policy</a>
                </div>
            </div>
            
        </div>
         -->
        <div id="blocks">
          <div id="block1"><img src="/img/logos/Horizontal@2x.png" alt="AirLab Logo" style="width:60%;"></div>
          <div id="block2">
            <center>

              <!-- <a class="button" itemprop="email" href="https://www.facebook.com" target="_blank">
                <i class="fab fa-github"></i>
              </a> -->
              <a class="button" itemprop="linkedin" href="https://www.linkedin.com/company/the-air-lab-at-carnegie-mellon-university" target="_blank">
                <i class="fab fa-linkedin fa-lg" style="height:100%;"></i>
              </a>
              <a class="button" itemprop="youtube" href="https://www.youtube.com/@airlab" target="_blank">
                <i class="fab fa-youtube fa-lg" style="height:100%;"></i>
              </a>
              <a class="button" itemprop="twitter" href="https://www.twitter.com/airlabcmu/" target="_blank">
                <i class="fab fa-twitter fa-lg"></i>
              </a>
              <a class="button" itemprop="medium" href="https://medium.com/airlabcmu" target="_blank">
                <i class="fab fa-medium fa-lg"></i>
              </a>
              <a class="button" itemprop="github" href="https://github.com/castacks" target="_blank">
                <i class="fab fa-github fa-lg"></i>
              </a>
              <a class="button" itemprop="bitbucket" href="https://bitbucket.org/castacks/" target="_blank">
                <i class="fab fa-bitbucket fa-lg"></i>
              </a>
              <br>
              <br>
              <p class="">&copy; 2023 | Built using the <a href="https://github.com/chrisrhymes/bulma-clean-theme">Bulma Clean Theme</a></p>
            </center>
          </div>
          <div id="block3"><img src="/img/riLogo2019.svg" alt="RI Logo" style="float: right;"></div>
        </div>
        <!-- <div>
          <a href="" class="button is-large"><div class="icon"><i class="fab fa-facebook"</i></div></a>
        </div> -->
        <!-- <div class="content is-small has-text-centered">
            <p class="">© 2020</p>
        </div> -->
    </div>


</footer>
 
    <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>

</html>
